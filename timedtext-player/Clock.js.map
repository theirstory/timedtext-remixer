{"version":3,"file":"Clock.js","sourceRoot":"","sources":["../src/Clock.ts"],"names":[],"mappings":"AAEA,MAAM,CAAC,OAAO,OAAO,KAAK;IAOtB,YAAY,GAAW,EAAE,QAA0B;QAC/C,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,eAAe,GAAG,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC;QAC7C,IAAI,CAAC,aAAa,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;QACvC,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IACzB,CAAC;IAED,KAAK;QACD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,qBAAqB,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACjD,CAAC;IAED,IAAI;QACA,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IACzB,CAAC;IAEO,KAAK,CAAC,IAAY;QACtB,IAAI,CAAC,IAAI,CAAC,OAAO;YAAE,OAAO;QAC1B,MAAM,KAAK,GAAG,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC;QAExC,IAAI,KAAK,GAAG,IAAI,CAAC,eAAe,EAAE;YAC9B,IAAI,CAAC,aAAa,GAAG,IAAI,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC;YAC3D,IAAI,CAAC,QAAQ,EAAE,CAAC;SACnB;QACD,qBAAqB,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACjD,CAAC;CACJ","sourcesContent":["type CallbackFunction = () => void;\n\nexport default class Clock {\n    private targetFPS: number;\n    private callback: CallbackFunction;\n    private targetFrameTime: number;\n    private lastFrameTime: number;\n    private running: boolean;\n\n    constructor(fps: number, callback: CallbackFunction) {\n        this.targetFPS = fps;\n        this.callback = callback;\n        this.targetFrameTime = 1000 / this.targetFPS;\n        this.lastFrameTime = performance.now();\n        this.running = false;\n    }\n\n    start(): void {\n        this.running = true;\n        requestAnimationFrame(this.frame.bind(this));\n    }\n\n    stop(): void {\n        this.running = false;\n    }\n\n    private frame(time: number): void {\n        if (!this.running) return;\n        const delta = time - this.lastFrameTime;\n\n        if (delta > this.targetFrameTime) {\n            this.lastFrameTime = time - (delta % this.targetFrameTime);\n            this.callback();\n        }\n        requestAnimationFrame(this.frame.bind(this));\n    }\n}\n"]}